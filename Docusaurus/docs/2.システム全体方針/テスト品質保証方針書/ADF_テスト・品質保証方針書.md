あなたはセキュリティアーキテクト兼DDDを理解したシステムアーキテクトです。\
以下の【形式】および【ISO/IEC Directives Part 2準拠ルール】に基づいて、対象システムの「テスト・品質保証方針書」を作成してください。\
出力はすべてMarkdown形式で記載してください（JSON形式・CSV形式は禁止）。\
また、成果物（表・文章）の提示より先に、必ず抽出・推論過程をstep-by-stepで記載し、\
その後に章立てに沿って成果物を順序厳守で出力してください。\
推測による情報補完は禁止し、不明点は必ず「未確定」と明記してください。\
また、入力情報が不足している場合や検討が必要な論点がある場合は、文書の末尾に「Stop（入力不足に対する質問）」「論点（検討が必要な事項）」セクションを出力してください。

---

### 【形式】

章：`## 第1章 タイトル`\
節：`### 1.1 タイトル`\
項：`#### 1.1.1 タイトル`\
その他：通常テキスト\
表はMarkdown表形式で記載し、表番号とキャプションを付与する（例：`**表1 — 〇〇一覧**`）\
JSON / CSV形式は禁止

---

### 【ISO/IEC Directives Part 2準拠ルール】

#### 要求事項の表現
出力文書では以下の表現を使い分けること：

| 表現 | 用途 | 英語対応 |
|------|------|----------|
| 〜しなければならない | 要求事項 | shall |
| 〜してはならない | 禁止事項 | shall not |
| 〜することが望ましい | 推奨事項 | should |
| 〜しないほうがよい | 非推奨 | should not |
| 〜してもよい | 許可事項 | may |
| 〜できる | 可能性・能力 | can |

#### 文書構成の原則
- 要求事項と説明・解説を明確に区別すること
- 各章・節には目的を明示すること
- 表には連番とキャプションを付与すること

---

## 第1章 適用範囲

### 1.1 目的

本書は、ハウスクレジット基幹システムにおける品質保証・テストの共通方針を定め、\
DDD＋SBE（Specification by Example）＋TDD を基盤とした品質保証の枠組みを確立することを目的とする。\
本書は、設計・実装フェーズにおける品質確保の基盤であり、単なるテスト計画書ではない。

### 1.2 適用範囲

**表1 — 適用範囲**
| 項目 | 記述内容 |
|----|------|
| 対象システム | ハウスクレジット基幹システム |
| 対象BC | ドメインスコープ定義書およびコンテキストマップに定義された全BC |
| 対象フェーズ | 設計・実装・テスト・運用 |
| 除外対象 | テスト計画書の詳細（別途作成） |

### 1.3 関連文書

**表2 — 関連文書一覧**
| 関連ドキュメント | 関係性 |
|----------------|--------|
| ソフトウェアアーキテクチャ方針書 | SBE/Living Documentation の詳細を参照 |
| セキュリティ方針書 | セキュリティテスト要件を参照 |
| 非機能要件定義書 | 性能・可用性テスト要件を参照 |

---

## 第2章 引用規格

本書は以下の規格・標準を参照する：

- ISO/IEC 25010:2011 システム及びソフトウェア品質モデル
- ISO/IEC/IEEE 29119 ソフトウェアテスト

---

## 第3章 用語及び定義

**表3 — 用語定義**
| 用語 | 定義 |
|------|------|
| SBE | Specification by Example。具体例による仕様定義 |
| TDD | Test-Driven Development。テスト駆動開発 |
| Living Documentation | 実行可能なテストから生成される常に最新の仕様書 |
| Gherkin | SBEで使用するビジネス可読な仕様記述言語 |

---

## 第4章 入力情報と前提

### 4.1 入力アセット

以下の正式インプットを前提とする（添付資料に基づく）：

### 4.2 前提条件

* SBE（Specification by Example）＋TDD を標準開発プロセスとして採用する：未確定
* テスト自動化率・カバレッジ閾値などの具体的数値は、テスト計画で確定する：未確定
* CI/CDパイプラインでの自動テスト実行が前提となる：未確定
* 非機能テストの詳細基準は非機能要件定義書で定義される：未確定

---

## 第5章 品質保証基本方針

### 5.1 品質目標

**表4 — 品質目標**
| 目標 | 説明 |
|-----|------|
| 仕様とコードの整合性 | SBE/Living Documentationにより、仕様とコードの乖離を防止しなければならない |
| 早期欠陥検出 | TDDにより、実装段階で欠陥を検出しなければならない |
| 継続的品質検証 | CI/CDパイプラインでテストを継続的に実行しなければならない |
| トレーサビリティ | 要件→仕様→テスト→コードの追跡可能性を確保しなければならない |

### 5.2 品質保証の原則

**表5 — 品質保証原則**
| 原則 | 説明 |
|-----|------|
| シフトレフト | テストを開発プロセスの早期に組み込まなければならない |
| 自動化優先 | 繰り返し実行するテストは自動化しなければならない |
| 継続的フィードバック | テスト結果を迅速にフィードバックしなければならない |

---

## 第6章 テストレベル・種別方針

### 6.1 テストレベル

**表6 — テストレベル定義**
| レベル | 目的 | 責任 |
|-------|------|------|
| ユニットテスト | 単一クラス・関数の動作検証 | 開発者 |
| 統合テスト | コンポーネント間の連携検証 | 開発者/QA |
| E2Eテスト | ユーザーシナリオの検証 | QA |
| 受け入れテスト | ビジネス要件の充足検証 | PO/ユーザー |

### 6.2 テスト種別

**表7 — テスト種別定義**
| 種別 | 目的 | 実施タイミング |
|-----|------|---------------|
| 機能テスト | 機能要件の検証 | 各フェーズ |
| 性能テスト | 性能要件の検証 | 統合テスト以降 |
| セキュリティテスト | セキュリティ要件の検証 | 統合テスト以降 |
| 回帰テスト | 変更による影響の検証 | 各変更時 |

---

## 第7章 SBE/Gherkin テスト方針

### 7.1 Gherkin 記述方針

**表8 — Gherkin記述原則**
| 原則 | 説明 |
|-----|------|
| ユビキタス言語 | BCのユビキタス言語を使用しなければならない |
| ビジネス視点 | 技術詳細ではなくビジネス視点で記述しなければならない |
| 具体例 | 抽象的なルールではなく具体例で記述しなければならない |
| 独立性 | 各シナリオは独立して実行可能でなければならない |

### 7.2 Gherkin ファイル管理

**表9 — Gherkinファイル管理方針**
| 項目 | 方針 |
|-----|------|
| 配置 | BC単位のディレクトリに配置しなければならない |
| 命名 | ユースケース名と整合させなければならない |
| バージョン管理 | ソースコードと同一リポジトリで管理しなければならない |

---

## 第8章 TDD 方針

### 8.1 TDD サイクル

**表10 — TDDサイクル**
| ステップ | 説明 |
|---------|------|
| Red | 失敗するテストを書かなければならない |
| Green | テストが通る最小限の実装を行わなければならない |
| Refactor | コードを改善しなければならない |

### 8.2 TDD 適用範囲

**表11 — TDD適用範囲**
| 対象 | 適用 |
|-----|------|
| ドメインロジック | 必須 |
| ユースケース | 必須 |
| インフラ層 | 推奨 |
| UI | 任意 |

---

## 第9章 テスト自動化方針

### 9.1 自動化対象

**表12 — 自動化対象**
| テスト種別 | 自動化 | 備考 |
|----------|--------|------|
| ユニットテスト | 必須 | カバレッジ閾値を設定しなければならない |
| 統合テスト | 必須 | APIレベルでの検証 |
| E2Eテスト | 推奨 | 主要シナリオを対象 |
| 性能テスト | 推奨 | 定期実行 |

### 9.2 CI/CD 統合

**表13 — CI/CD統合方針**
| 項目 | 方針 |
|-----|------|
| テスト実行 | プルリクエスト時に自動実行しなければならない |
| 品質ゲート | テスト失敗時はマージを禁止しなければならない |
| カバレッジ | 閾値を下回る場合は警告しなければならない |

---

## 第10章 品質メトリクス

**表14 — 品質メトリクス**
| メトリクス | 説明 | 閾値 |
|----------|------|------|
| コードカバレッジ | テスト対象コードの割合 | 未確定 |
| 欠陥密度 | KLOC あたりの欠陥数 | 未確定 |
| テスト成功率 | 成功テスト/全テスト | 100%必須 |

---

## Stop（入力不足に対する質問）

（入力情報が不足している場合、ここに質問を記載する）

---

## 論点（検討が必要な事項）

（検討が必要な論点がある場合、ここに記載する）
