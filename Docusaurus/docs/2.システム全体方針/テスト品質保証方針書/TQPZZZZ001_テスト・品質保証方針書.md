---
id: TQPZZZZ001
title: テスト・品質保証方針書
sidebar_position: 1
---

# テスト・品質保証方針書

| 項目 | 内容 |
|------|------|
| ドキュメントID | TQPZZZZ001 |
| 版数 | 1.3 |
| 作成日 | 2026-01-15 |
| 最終更新日 | 2026-01-15 |
| ステータス | ドラフト |

---

## 第1章 適用範囲

### 1.1 目的

本書は、ハウスクレジット基幹システムにおける品質保証・テストの共通方針を定め、DDD＋SBE（Specification by Example）＋TDD を基盤とした品質保証の枠組みを確立することを目的とする。

本書は、設計・実装フェーズにおける品質確保の基盤であり、単なるテスト計画書ではない。開発プロセス全体を通じた品質の作り込みと検証の方針を定義する。

### 1.2 適用範囲

**表1 — 適用範囲**

| 項目 | 記述内容 |
|------|----------|
| 対象システム | ハウスクレジット基幹システム |
| 対象BC | ドメインスコープ定義書およびコンテキストマップに定義された全BC |
| 対象フェーズ | 設計・実装・テスト・運用 |
| 除外対象 | テスト計画書の詳細（別途作成）、具体的なテストケース |

### 1.3 技術スタック

本システムにおけるテスト基盤の技術スタックは以下の通りとする。

**表1-2 — 技術スタック**

| 領域 | 技術 | 用途 | 備考 |
|------|------|------|------|
| ユニットテスト | JUnit 5 + Mockito | 単体テスト | Java標準 |
| BDD/Gherkin | Cucumber | SBE/受け入れテスト | Living Documentation |
| E2Eテスト | Playwright / Selenium | ブラウザテスト | 選定中 |
| 性能テスト | K6 / JMeter | 負荷テスト | 選定中 |
| アーキテクチャテスト | ArchUnit | 依存関係検証 | Java用 |
| CI/CD | GitHub Actions / GitLab CI | 自動テスト実行 | 選定中 |

### 1.4 関連文書

**表2 — 関連文書一覧**

| 関連ドキュメント | 関係性 |
|------------------|--------|
| ソフトウェアアーキテクチャ方針書 | SBE/Living Documentationの詳細を参照 |
| セキュリティ方針書 | セキュリティテスト要件を参照 |
| 例外処理ポリシー | エラーハンドリングのテスト方針を参照 |
| トランザクション方針書 | トランザクション制御のテスト方針を参照 |
| 非機能要件定義書 | 性能・可用性テスト要件を参照（未確定） |

---

## 第2章 引用規格

本書は以下の規格・標準を参照する：

- ISO/IEC 25010:2011 システム及びソフトウェア品質モデル
- ISO/IEC/IEEE 29119 ソフトウェアテスト
- ISO/IEC 9126 ソフトウェア品質特性

---

## 第3章 用語及び定義

### 3.1 規範用語の定義

本書で使用する規範用語は RFC 2119 に準拠し、以下の意味で使用する。

**表2-2 — 規範用語定義**

| 用語 | 意味 |
|------|------|
| しなければならない（MUST） | この要件は絶対的に必須である。例外は認められない |
| してはならない（MUST NOT） | この行為は絶対的に禁止される。例外は認められない |
| すべきである（SHOULD） | 特別な理由がない限り、この要件に従うことが強く推奨される |
| すべきではない（SHOULD NOT） | 特別な理由がない限り、この行為を避けることが強く推奨される |
| してもよい（MAY） | この要件は任意であり、状況に応じて判断してよい |

### 3.2 ドメイン用語の定義

本書で使用する主要な用語を以下に定義する。

**表3 — 用語定義**

| 用語 | 定義 |
|------|------|
| SBE | Specification by Example。具体例による仕様定義 |
| TDD | Test-Driven Development。テスト駆動開発 |
| BDD | Behavior-Driven Development。振る舞い駆動開発 |
| Living Documentation | 実行可能なテストから生成される常に最新の仕様書 |
| Gherkin | SBEで使用するビジネス可読な仕様記述言語 |
| ユビキタス言語 | BC内で共通に使用される業務用語 |
| モック | テスト対象の依存オブジェクトを模擬するオブジェクト |
| スタブ | テスト用の固定された値を返すダミーオブジェクト |

---

## 第4章 品質保証基本方針

### 4.1 品質目標

品質保証の目標を以下のように定める。

**表4 — 品質目標**

| 目標 | 説明 | 測定方法 |
|------|------|---------|
| 仕様とコードの整合性 | SBE/Living Documentationにより、仕様とコードの乖離を防止しなければならない | Living Documentation生成率 |
| 早期欠陥検出 | TDDにより、実装段階で欠陥を検出しなければならない | 単体テスト段階での欠陥検出率 |
| 継続的品質検証 | CI/CDパイプラインでテストを継続的に実行しなければならない | 自動テスト実行頻度 |
| トレーサビリティ | 要件→仕様→テスト→コードの追跡可能性を確保しなければならない | トレーサビリティマトリクス完成度 |
| 高いカバレッジ | ドメインロジックの網羅的なテストを実施しなければならない | コードカバレッジ率 |

### 4.2 品質保証の原則

**表5 — 品質保証原則**

| 原則 | 説明 |
|------|------|
| シフトレフト | テストを開発プロセスの早期に組み込まなければならない |
| 自動化優先 | 繰り返し実行するテストは自動化しなければならない |
| 継続的フィードバック | テスト結果を迅速にフィードバックしなければならない |
| テストピラミッド | ユニットテストを基盤とし、E2Eテストは最小限とすることが望ましい |
| 失敗から学ぶ | 欠陥が発生した場合は、その原因分析と再発防止を実施しなければならない |

### 4.3 品質保証体制

**表6 — 品質保証体制**

| 役割 | 責任 |
|------|------|
| 開発者 | 単体テスト・統合テストの実装と実行 |
| QAエンジニア | テスト戦略の策定、E2Eテストの実装と実行 |
| プロダクトオーナー | 受け入れ基準の定義、受け入れテストの実施 |
| アーキテクト | テスト方針の策定、アーキテクチャテストの定義 |

---

## 第5章 テストレベル・種別方針

### 5.1 テストレベル

各テストレベルの目的と実施方針を定義する。

**表7 — テストレベル定義**

| レベル | 目的 | 責任 | カバレッジ目標 | 実施タイミング |
|--------|------|------|---------------|---------------|
| ユニットテスト | 単一クラス・関数の動作検証 | 開発者 | 70%以上（未確定） | 実装時 |
| 統合テスト | コンポーネント間の連携検証 | 開発者/QA | 主要パスをカバー | ユニットテスト後 |
| E2Eテスト | ユーザーシナリオの検証 | QA | 主要シナリオをカバー | 統合テスト後 |
| 受け入れテスト | ビジネス要件の充足検証 | PO/ユーザー | 全ユーザーストーリー | リリース前 |

#### 5.1.1 ユニットテスト

**表8 — ユニットテスト方針**

| 項目 | 方針 |
|------|------|
| 対象 | 集約、エンティティ、VO、ドメインサービス、ユースケース |
| 範囲 | 単一クラスまたは関数 |
| 依存関係 | モック・スタブを使用して外部依存を排除しなければならない |
| 実行速度 | 高速に実行できなければならない（1テスト<100ms目安） |
| 独立性 | 各テストは独立して実行可能でなければならない |

#### 5.1.2 統合テスト

**表9 — 統合テスト方針**

| 項目 | 方針 |
|------|------|
| 対象 | BC内のコンポーネント間連携、外部システム連携 |
| 範囲 | 複数コンポーネント、API、DB連携 |
| 環境 | テスト用DB・外部システムを使用する |
| データ | テストデータを準備し、テスト後にクリーンアップしなければならない |

#### 5.1.3 E2Eテスト

**表10 — E2Eテスト方針**

| 項目 | 方針 |
|------|------|
| 対象 | ユーザーシナリオ全体 |
| 範囲 | UI→API→DB→外部システムの全体フロー |
| 優先度 | クリティカルパス・主要ユースケースを優先する |
| 実行頻度 | CI/CD、リリース前、定期実行 |

### 5.2 アーキテクチャレイヤーとテストの対応

クリーンアーキテクチャの各レイヤーに対するテスト方針を定義する。

**表11 — レイヤー別テスト手法**

| レイヤ | 主な品質の守備範囲 | 主なテスト手法 |
|--------|-------------------|----------------|
| エンティティ | 不変条件・計算ロジックの正しさ | ユニットテスト（JUnit + Mockito） |
| ユースケース | フロー・業務ルール・状態遷移 | SBE（Gherkin/Cucumber）/ ユニットテスト |
| インターフェイスアダプタ | マッピング・変換・I/O契約 | 統合テスト / APIテスト / リポジトリテスト |
| 外部FW・ドライバー | 配線・設定・インフラ連携 | 統合テスト / E2Eテスト / スモークテスト |

**表12 — テスト種類とレイヤーの対応**

| テスト種類 | 主に見るレイヤ | 主なテスト手法 | 補足 |
|------------|---------------|----------------|------|
| 部品テスト | Entities / 一部 UseCases | ユニットテスト | クラス・関数単位。ドメインロジックをここで担保 |
| 単体テスト | UseCases / アダプタ | ユニットテスト / SBE | 1画面・1API・1バッチ単位。ユースケースとその入出力アダプタの組み合わせ |
| 内部結合テスト | UseCases + アダプタ + FW | 統合テスト（TestContainers等） | 同一機能内で画面↔API↔DBまで通す |
| 外部結合テスト | 複数BC / サブシステム | 統合テスト / APIテスト | 業務コンテキスト跨ぎ。Saga/メッセージングなども含む |
| 総合テスト | システム全体 + 外部 | E2Eテスト（Playwright/Selenium） | E2Eシナリオ。バッチ・監視・ジョブ連携なども含む |

### 5.3 テスト種別

**表13 — テスト種別定義**

| 種別 | 目的 | 実施タイミング | 自動化 |
|------|------|---------------|--------|
| 機能テスト | 機能要件の検証 | 各フェーズ | 必須 |
| 性能テスト | 性能要件の検証 | 統合テスト以降 | 推奨 |
| セキュリティテスト | セキュリティ要件の検証 | 統合テスト以降 | 推奨 |
| 回帰テスト | 変更による影響の検証 | 各変更時 | 必須 |
| 探索的テスト | 未知の欠陥の発見 | 各フェーズ | 不可 |
| ユーザビリティテスト | UI/UXの検証 | UI実装後 | 一部可 |

---

## 第6章 SBE/Gherkin テスト方針

### 6.1 Gherkin 記述方針

Gherkinによる仕様記述は、以下の原則に従わなければならない。

**表14 — Gherkin記述原則**

| 原則 | 説明 |
|------|------|
| ユビキタス言語 | BCのユビキタス言語を使用しなければならない |
| ビジネス視点 | 技術詳細ではなくビジネス視点で記述しなければならない |
| 具体例 | 抽象的なルールではなく具体例で記述しなければならない |
| 独立性 | 各シナリオは独立して実行可能でなければならない |
| 検証可能性 | Then句で検証可能な期待結果を記述しなければならない |

#### 6.1.1 Gherkin構文

Given-When-Then形式で記述しなければならない。

**表15 — Given-When-Then構文**

| 句 | 役割 | 記述内容 |
|----|------|---------|
| Given | 前提条件 | テスト実行前の状態を記述する |
| When | 実行 | テスト対象の操作を記述する |
| Then | 期待結果 | 期待される結果を記述する |
| And | 追加 | Given/When/Thenに追加条件を記述する |
| But | 否定 | 期待されない結果を記述する |

### 6.2 Gherkin ファイル管理

**表16 — Gherkinファイル管理方針**

| 項目 | 方針 |
|------|------|
| 配置 | BC単位のディレクトリに配置しなければならない |
| 命名 | `{ユースケース名}.feature` の形式で命名しなければならない |
| バージョン管理 | ソースコードと同一リポジトリで管理しなければならない |
| レビュー | プルリクエスト時にレビューしなければならない |
| 言語 | 日本語で記述することが望ましい |

### 6.3 Living Documentation生成

Gherkinから自動的にLiving Documentationを生成しなければならない。

**表17 — Living Documentation要件**

| 要件 | 説明 |
|------|------|
| 自動生成 | CI/CDパイプラインで自動生成しなければならない |
| 最新性 | テスト実行結果を反映しなければならない |
| アクセス性 | 関係者がアクセス可能な場所に公開しなければならない |
| トレーサビリティ | 要件とのトレーサビリティを確保しなければならない |

---

## 第7章 TDD 方針

### 7.1 TDD サイクル

TDDは、Red-Green-Refactorのサイクルで実施しなければならない。

**表18 — TDDサイクル**

| ステップ | 説明 | 実施内容 |
|---------|------|---------|
| Red | 失敗するテストを書く | 仕様を表現するテストを先に実装しなければならない |
| Green | テストが通る最小限の実装 | テストが通る最小限のコードを実装しなければならない |
| Refactor | コードを改善する | テストを維持しながらコードを改善しなければならない |

### 7.2 TDD 適用範囲

**表19 — TDD適用範囲**

| 対象 | 適用 | 理由 |
|------|------|------|
| ドメインロジック | 必須 | ビジネスロジックの正確性が最重要 |
| ユースケース | 必須 | ユースケースの動作保証が必要 |
| アダプタ層 | 推奨 | 外部連携の動作保証が望ましい |
| インフラ層 | 推奨 | 技術的な実装の動作保証が望ましい |
| UI | 任意 | コスト対効果を考慮して判断 |

### 7.3 テストダブル使用方針

**表20 — テストダブル使用方針**

| 種類 | 用途 | 使用場面 |
|------|------|---------|
| モック | 振る舞いの検証 | メソッド呼び出しの検証が必要な場合 |
| スタブ | 固定値の返却 | 外部依存の排除が必要な場合 |
| スパイ | 呼び出し情報の記録 | 呼び出し履歴の確認が必要な場合 |
| フェイク | 簡易実装 | 軽量な動作する実装が必要な場合 |

### 7.4 TDDにおける品質ゲート

TDD前提の開発では、テストの成否ではなく「どこまで品質が定義されているか」を品質ゲートとして確認しなければならない。

#### 7.4.1 部品テストの品質ゲート

部品テストでは、業務ルールがテストとして言語化されているかを確認する。

**表21 — 部品テスト品質ゲート（機能性観点）**

| 副特性 | 品質ゲート | 具体例 |
|--------|-----------|--------|
| 合目的性 | 業務ルールの意図がテストとして仕様化されている | 条件と結果がテスト名から読み取れる |
| 正確性 | 正常値・境界値・代表的異常値がすべてテストで定義されている | 境界値前後のケースが個別テストで定義されている |
| セキュリティ | 不正入力・想定外入力に対する振る舞いが定義されている | null、空文字、負数を渡した場合の業務例外がテストで保証されている |

**表22 — 部品テスト品質ゲート（保守性観点）**

| 副特性 | 品質ゲート | 具体例 |
|--------|-----------|--------|
| 解析性 | テストFail時にどの業務条件が壊れたか即分かる | テスト名が業務条件そのものになっておりログ確認が不要 |
| 変更性 | 業務仕様変更時の修正範囲が局所的である | 条件変更時に該当部品のテストのみFailする |
| 試験性 | 外部依存なしで単独実行できる | DB、外部API、現在時刻に依存せずテスト可能 |

#### 7.4.2 単体テストの品質ゲート

単体テストでは、ユースケースの成立条件がテストで固定されているかを確認する。

**表23 — 単体テスト品質ゲート（機能性観点）**

| 副特性 | 品質ゲート | 具体例 |
|--------|-----------|--------|
| 合目的性 | ユースケース単位の目的がテストとして仕様化されている | 正常系・異常系の両方のテストシナリオが存在する |
| 正確性 | 正常系・主要分岐・代表的異常系が網羅されている | 必須項目不足時に400エラー、業務ルール違反時に業務エラーを返す |
| セキュリティ | 権限制御・入力制約が単体レベルで確認されている | 権限不足時に403エラーになるテストがある |

**表24 — 単体テスト品質ゲート（保守性観点）**

| 副特性 | 品質ゲート | 具体例 |
|--------|-----------|--------|
| 解析性 | テストFail時にどのユースケースが壊れたか即分かる | テスト名にユースケース名と条件が含まれている |
| 変更性 | 仕様変更時の修正影響が限定的である | 特定API/画面のテストのみFailし、影響範囲が明確 |
| 試験性 | ローカル・CIで外部環境なしに実行できる | DB・外部IFなしで単体テストが再現可能 |

---

## 第8章 テスト自動化方針

### 8.1 自動化対象

**表25 — 自動化対象**

| テスト種別 | 自動化 | 実施頻度 | 備考 |
|-----------|--------|---------|------|
| ユニットテスト | 必須 | 毎コミット | カバレッジ閾値を設定しなければならない |
| 統合テスト | 必須 | 毎プルリクエスト | APIレベルでの検証 |
| E2Eテスト | 推奨 | 毎日/リリース前 | 主要シナリオを対象 |
| 性能テスト | 推奨 | 週次/リリース前 | 性能劣化の早期検出 |
| セキュリティテスト | 推奨 | 週次/リリース前 | SAST/DAST |
| 回帰テスト | 必須 | 毎プルリクエスト | 全自動テストを実行 |

### 8.2 CI/CD 統合

CI/CDパイプラインにテストを統合しなければならない。

**表26 — CI/CD統合方針**

| 項目 | 方針 |
|------|------|
| テスト実行 | プルリクエスト時に自動実行しなければならない |
| 品質ゲート | テスト失敗時はマージを禁止しなければならない |
| カバレッジ | 閾値を下回る場合は警告しなければならない |
| 実行時間 | 10分以内に完了することが望ましい（ユニット+統合） |
| 失敗時対応 | 失敗時は即座に通知しなければならない |

### 8.3 テスト環境

**表27 — テスト環境方針**

| 環境 | 用途 | 構成 |
|------|------|------|
| ローカル開発環境 | ユニットテスト | 開発者PC |
| CI環境 | 自動テスト | コンテナベース |
| 統合テスト環境 | 統合テスト | 本番相当構成（縮小版） |
| ステージング環境 | E2Eテスト・受け入れテスト | 本番相当構成 |

### 8.4 高度なテスト手法のCI/CD統合

AI駆動開発における品質担保のため、高度なテスト手法をCI/CDパイプラインに統合しなければならない。

**表28 — 高度なテスト手法のCI/CD統合**

| テスト手法 | 実行タイミング | 品質ゲート | 備考 |
|-----------|--------------|-----------|------|
| アーキテクチャテスト | 毎コミット | 必須 | 違反時はマージ禁止 |
| プロパティテスト | 毎PR | 推奨 | ドメイン層の重要部分に限定 |
| ミューテーションテスト | 夜間/週次 | 参考 | 将来導入検討（付録B参照） |

---

## 第9章 テストデータ管理

### 9.1 テストデータ準備

**表28 — テストデータ準備方針**

| 項目 | 方針 |
|------|------|
| データ生成 | テストごとに必要なデータを準備しなければならない |
| データ独立性 | テスト間でデータを共有してはならない |
| データクリーンアップ | テスト後にデータをクリーンアップしなければならない |
| 匿名化 | 本番データを使用する場合は匿名化しなければならない |

### 9.2 テストデータパターン

**表29 — テストデータパターン**

| パターン | 使用場面 |
|---------|---------|
| 境界値 | 境界値テストで使用 |
| 正常値 | 正常系テストで使用 |
| 異常値 | 異常系テストで使用 |
| 等価クラス | 等価分割テストで使用 |

---

## 第10章 アーキテクチャテスト

### 10.1 アーキテクチャテスト方針

アーキテクチャの整合性を自動テストで検証しなければならない。

**表30 — アーキテクチャテスト方針**

| 項目 | 検証内容 |
|------|---------|
| レイヤー依存 | レイヤー間の依存方向を検証しなければならない |
| BC境界 | BC間の依存関係を検証しなければならない |
| 命名規約 | クラス・パッケージの命名規約を検証しなければならない |
| 集約整合性 | 集約の境界とトランザクション境界を検証しなければならない |

### 10.2 推奨ツール

**表31 — アーキテクチャテストツール**

| ツール | 用途 |
|--------|------|
| ArchUnit | Javaのアーキテクチャテスト |
| NetArchTest | .NETのアーキテクチャテスト |
| 言語依存 | 各言語に応じたツールを選定する |

### 10.3 アーキテクチャテストルール定義

AI駆動開発においては、生成されたコードがアーキテクチャルールに準拠しているかを自動検証しなければならない。

**表32 — アーキテクチャテストルール**

| ルール種別 | 検証内容 | 実行タイミング |
|-----------|---------|---------------|
| レイヤー依存 | Domain層がInfrastructure層に依存していないこと | 毎コミット |
| パッケージ構成 | 集約単位でパッケージが分離されていること | 毎コミット |
| 命名規約 | クラス名が命名規則に従っていること | 毎コミット |
| 循環参照 | パッケージ間に循環依存がないこと | 毎コミット |
| 集約境界 | 集約外から集約内部のエンティティに直接アクセスしていないこと | 毎コミット |

### 10.4 AI駆動開発におけるアーキテクチャテストの意義

AI（Cline等）が生成したコードは、アーキテクチャ制約を意識せずに実装される可能性がある。アーキテクチャテストにより、以下を自動で担保しなければならない。

**表33 — AI駆動開発でのアーキテクチャテストの効果**

| 効果 | 説明 |
|------|------|
| レイヤー分離の維持 | AIが生成したコードがレイヤー境界を越えて依存していないか検証する |
| DDDパターンの遵守 | 集約境界、リポジトリパターン等の戦術パターンが守られているか検証する |
| 技術的負債の防止 | 循環参照や不適切な依存が蓄積される前に検知する |
| コードレビューの効率化 | アーキテクチャ観点のレビューを自動化し、人間はビジネスロジックに集中できる |

---

## 第10-2章 プロパティテスト方針

### 10-2.1 プロパティテストの目的

プロパティテストは、ランダムな入力を用いてドメインの不変条件を検証する手法である。従来のユニットテストでは網羅しきれない境界値・エッジケースを自動発見できる。

AI駆動開発においては、AIが生成したテストケースの「漏れ」を補完する役割を持つ。

### 10-2.2 適用範囲

**表34 — プロパティテスト適用範囲**

| 対象 | 適用 | 理由 |
|------|------|------|
| 値オブジェクト（VO） | 必須 | 不変条件の検証が最も効果的 |
| エンティティのビジネスルール | 推奨 | 状態遷移・計算ロジックの検証 |
| ドメインサービス | 推奨 | 複雑なビジネスルールの検証 |
| アダプタ層 | 任意 | コスト対効果を考慮 |

### 10-2.3 プロパティテストの記述方針

**表35 — プロパティテスト記述方針**

| 項目 | 方針 |
|------|------|
| 不変条件の定義 | ドメインの不変条件を明確に定義しなければならない |
| 入力生成 | ドメイン固有の入力生成器（Generator）を定義することが望ましい |
| 実行回数 | CI実行時間を考慮し、100〜1000回程度を目安とする |
| 失敗時の再現性 | シード値を記録し、再現可能にしなければならない |

### 10-2.4 不変条件の例

プロパティテストで検証すべき不変条件の例を以下に示す。

**表36 — 不変条件の例**

| ドメイン概念 | 不変条件 | 検証内容 |
|-------------|---------|---------|
| 金額（Money） | 金額は0以上である | 任意の正の入力で金額が負にならない |
| 割合（Rate） | 割合は0〜100%の範囲内である | 任意の入力で範囲外にならない |
| 日付範囲 | 開始日≦終了日である | 任意の日付ペアで逆転しない |
| 残高計算 | 入金額−出金額＝残高である | 任意の取引列で等式が成立する |

### 10-2.5 推奨ツール

**表37 — プロパティテストツール**

| ツール | 言語 | 備考 |
|--------|------|------|
| jqwik | Java | JUnit5統合、推奨 |
| QuickTheories | Java | 軽量な代替 |
| Hypothesis | Python | Python向け |
| fast-check | TypeScript | フロントエンド向け |

---

## 第11章 性能テスト

### 11.1 性能テスト種別

**表32 — 性能テスト種別**

| 種別 | 目的 | 実施タイミング |
|------|------|---------------|
| 負荷テスト | 通常負荷での性能検証 | 統合テスト以降 |
| ストレステスト | 限界負荷での性能検証 | リリース前 |
| スパイクテスト | 急激な負荷増加への対応検証 | リリース前 |
| 耐久テスト | 長時間稼働での性能検証 | リリース前 |

### 11.2 性能テスト観点

**表33 — 性能テスト観点**

| 観点 | 測定項目 | 目標値 |
|------|---------|--------|
| 応答時間 | API応答時間 | 未確定 |
| スループット | 秒間処理件数 | 未確定 |
| リソース使用率 | CPU/メモリ使用率 | 未確定 |
| エラー率 | エラー発生率 | 1%未満 |

---

## 第12章 セキュリティテスト

### 12.1 セキュリティテスト種別

**表34 — セキュリティテスト種別**

| 種別 | 目的 | 実施方法 |
|------|------|---------|
| SAST | 静的コード解析 | 自動ツール |
| DAST | 動的セキュリティテスト | 自動ツール |
| ペネトレーションテスト | 侵入テスト | 専門家による実施 |
| 脆弱性診断 | 既知脆弱性の検証 | 自動ツール |

### 12.2 セキュリティテスト観点

**表35 — セキュリティテスト観点**

| 観点 | 検証内容 |
|------|---------|
| 認証・認可 | 不正アクセスの防止 |
| 入力検証 | インジェクション攻撃の防止 |
| 暗号化 | データ保護の検証 |
| セッション管理 | セッションハイジャックの防止 |
| エラーハンドリング | 情報漏洩の防止 |

---

## 第13章 品質メトリクス

### 13.1 品質メトリクス定義

**表36 — 品質メトリクス**

| メトリクス | 説明 | 閾値 | 測定頻度 |
|-----------|------|------|---------|
| コードカバレッジ | テスト対象コードの割合 | 70%以上（未確定） | 毎コミット |
| 欠陥密度 | KLOCあたりの欠陥数 | 未確定 | 毎スプリント |
| テスト成功率 | 成功テスト/全テスト | 100%必須 | 毎実行 |
| 欠陥検出率 | 各フェーズでの欠陥検出数 | 未確定 | 毎スプリント |
| 欠陥修正時間 | 欠陥発見から修正までの時間 | 未確定 | 毎スプリント |

### 13.2 品質ダッシュボード

品質メトリクスを可視化するダッシュボードを構築しなければならない。

**表37 — ダッシュボード要件**

| 要件 | 説明 |
|------|------|
| リアルタイム性 | CI/CD実行後、即座に更新しなければならない |
| アクセス性 | チーム全員がアクセス可能でなければならない |
| トレンド表示 | 時系列でのトレンドを表示しなければならない |
| アラート | 閾値を下回った場合に通知しなければならない |

---

## 第14章 欠陥管理

### 14.1 欠陥分類

**表38 — 欠陥分類**

| 分類 | 説明 | 優先度 |
|------|------|--------|
| Critical | システム停止・データ損失 | 最高 |
| High | 主要機能の不具合 | 高 |
| Medium | 一部機能の不具合 | 中 |
| Low | 軽微な不具合 | 低 |

### 14.2 欠陥ライフサイクル

**表39 — 欠陥ライフサイクル**

| ステータス | 説明 |
|-----------|------|
| Open | 欠陥を発見 |
| Assigned | 担当者をアサイン |
| In Progress | 修正作業中 |
| Fixed | 修正完了 |
| Verified | 修正確認完了 |
| Closed | クローズ |
| Reopened | 再発生 |

---

## 第15章 テストレポート

### 15.1 レポート種別

**表40 — テストレポート種別**

| レポート | 目的 | 頻度 |
|---------|------|------|
| 日次レポート | CI/CD実行結果 | 毎日 |
| スプリントレポート | スプリントの品質状況 | スプリント終了時 |
| リリースレポート | リリース判定資料 | リリース前 |
| 品質分析レポート | 品質傾向分析 | 月次 |

### 15.2 レポート内容

**表41 — テストレポート必須項目**

| 項目 | 内容 |
|------|------|
| 実行サマリ | テスト実行数・成功率・失敗率 |
| カバレッジ | コードカバレッジ・要件カバレッジ |
| 欠陥サマリ | 新規欠陥・未修正欠陥・修正済み欠陥 |
| リスク分析 | 品質リスクの評価 |
| 推奨事項 | 改善提案 |

---

## 付録A 未確定事項一覧

本方針書において「未確定」と記載された事項を以下にまとめる。これらは後続の検討・合意形成により確定させなければならない。

**表A.1 — 未確定事項一覧**

| 章節 | 項目 | 備考 |
|------|------|------|
| 5.1 | コードカバレッジ目標値 | プロジェクト特性に応じて設定が必要 |
| 1.3 | 非機能要件定義書の存在 | 別途作成が必要 |
| 11.2 | 性能テスト目標値 | 非機能要件に基づき設定が必要 |
| 13.1 | 各種メトリクスの閾値 | プロジェクト特性に応じて設定が必要 |

---

## 付録B 検討が必要な論点

以下は、本方針書の運用にあたり検討が必要な論点である。

1. **テストツールの選定**
   - ユニットテストフレームワーク（JUnit、NUnit、pytest等）
   - E2Eテストツール（Selenium、Playwright、Cypress等）
   - 性能テストツール（JMeter、Gatling、K6等）
   - BDDツール（Cucumber、SpecFlow等）

2. **カバレッジ目標の設定**
   - ドメイン層のカバレッジ目標値
   - 全体のカバレッジ目標値
   - カバレッジ測定対象の範囲

3. **テスト実行戦略**
   - 並列実行の可否と方法
   - テスト実行順序の最適化
   - 失敗時のリトライ戦略

4. **テストデータ管理**
   - テストデータ生成の自動化
   - テストデータのバージョン管理
   - 本番データの匿名化方法

5. **性能テスト基準値の設定**
   - 応答時間の目標値
   - スループットの目標値
   - リソース使用率の閾値
   - 性能劣化の許容範囲

6. **セキュリティテストの実施体制**
   - 専門家の関与範囲
   - ペネトレーションテストの実施頻度
   - 脆弱性対応のプロセス

7. **品質メトリクスの具体化**
   - 各メトリクスの具体的な閾値設定
   - メトリクスの測定方法
   - メトリクスの可視化方法

8. **Living Documentationツールの選定**
   - Cucumber等のBDDツールの選定
   - ドキュメント生成ツールの選定
   - 公開方法（Docusaurus、Confluence等）

9. **テスト自動化の優先順位**
   - 自動化対象の優先順位付け
   - 自動化のROI評価
   - 段階的な自動化の進め方

10. **継続的改善プロセス**
    - テストプロセスの定期的な見直し
    - 品質メトリクスに基づく改善活動
    - ベストプラクティスの共有

11. **ミューテーションテストの導入検討**
    - 目的：AIが生成したテストコードが「本当にバグを検知できるか」を検証する
    - 背景：AI駆動開発では、AIが生成したテストが形式的に正しくても、実際のバグを検知できない可能性がある
    - 検討事項：
      - 実行時間が長い（10〜60分以上）ためCI組み込みが困難
      - 夜間バッチまたは週次での限定実行を検討
      - スコープを重要ドメイン（値オブジェクト、集約ルート等）に限定
      - ミューテーションスコア（殺されたミュータント/総ミュータント）を品質指標として活用
    - ツール候補：Pitest（Java）、Stryker（JavaScript/TypeScript）

---

## 改版履歴

| 版数 | 日付 | 変更内容 | 作成者 |
|------|------|---------|--------|
| 1.0 | 2026-01-15 | 初版作成 | - |
| 1.1 | 2026-01-15 | 規範用語定義追加、技術スタック追加 | - |
| 1.2 | 2026-01-15 | レイヤー別テスト対応表追加、TDD品質ゲート追加 | - |
| 1.3 | 2026-01-15 | アーキテクチャテスト詳細追加、プロパティテスト方針追加、高度なテスト手法のCI/CD統合追加 | - |
