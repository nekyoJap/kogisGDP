---
sidebar_position: 1
---

# 運用ルール（ADF生成×Backlog Git×方針書）

## 1. 目的

* ADFから方針書（AIガードレール）を生成し、AIの推測・創作を防ぐ
* 入力不足は **Stop（質問）** として残し、確定扱いしない
* Backlog課題とPRで、作業と意思決定を追跡可能にする

---

## 2. 対象ディレクトリと配置

### 置き場所（固定）

* dev_pfm_housecreditcardリポジトリ
* `docusaurus/docs/2.システム全体方針/`

### ADFも同じディレクトリ

* 方針書：`docusaurus/docs/2.システム全体方針/<採番ID>_<文書名>.md`
* ADF：`docusaurus/docs/2.システム全体方針/ADF_<文書名>.md`

---

## 3. 採番・命名

* 採番は **採番体系.md** に従う
* ファイル名は **採番ID＋日本語**（スペースなし）
* ファイル名は原則変更しない（変更が必要な場合は改訂としてPR）

---

## 4. 前提インプット

* ADF生成時の入力は **「採番体系＋ADF」** のみ
* 業務/BCなど不足情報は推測で補完しない
  → Stop（質問）として残す

---

## 5. Backlog課題の構造（親＝ドキュメント、子＝実作業）

### 親課題（ドキュメント）

* 目的：進捗管理・最終Approved・Stop/論点の集約
* 親課題の本文（またはコメント）に保持するもの

  * 最新版のファイルパス
  * Stop一覧（最新版）
  * 論点一覧（最新版）
  * 決定事項（会議結論の要点）
  * 子課題リンク（B、C以降）

### 子課題（実作業＝PR単位）

* 原則：**1子課題＝1PR**
* PRの「関連課題」は **必ず子課題を選択**（親は選ばない）

---

## 6. 子課題の分割ルール（増分方式）

### 子課題B：初版作成（0.1＋Stop＋論点）

* ADFから方針書を生成し、同時に **Stop** と **論点** まで含めて作成する
* 初版PRはこの子課題に紐づける

### 子課題C以降：増分対応（レビュー／会議起点）

* PRレビュー結果や会議で追加タスクが出たら、都度子課題を作成
* 1子課題＝1PRを守る
* 子課題名は短く「何を直すか」が分かるようにする（例）

  * `改訂（Stop具体化）`
  * `整合（API方針と矛盾解消）`
  * `会議反映（決定事項反映）`
  * `追補（Output Contract補強）`
  * `採番/体裁（章立て・命名修正）`

---

## 7. Git運用（Backlog Git）

### ブランチ

* `main`：Approved（確定）だけ。直接pushしない
* 作業ブランチ：`work/<採番ID>`

  * 例：`work/SA-CO-ZZ-ZZ0003D`

### PR

* 原則：**1PR＝1ドキュメント**
* PR作成時に **関連課題で子課題を必ず選択**

---

## 8. 作業フロー（全体）

1. PMO/TCT：`docs/2.システム全体方針/` 作成、ADF配置、親課題、0.1版作成
2. 各チーム：子課題B起票 → ブランチ作成 → Clineで生成 → 一次レビュー
3. PR作成：関連課題に子課題を選択 → テンプレ記載
4. PRレビュー後にマージ（`main`へ）
5. 追加タスクが出たら子課題C以降を起票し、増分PRで反映

### 8.1 チーム分担案

#### 2チーム分担案

**ITF：基盤（インタフェース・整合性・連携・データ）**

* 例外処理ポリシー
* APIガバナンス方針書
* アプリケーションログ方針書
* トランザクション方針書
* 非同期連携方針
* データモデリング方針書
* ソフトウェアアーキテクチャ方針書

**ODNS：統制（セキュリティ・品質・ソフトウェア設計）**

* 認証・認可方針書
* セキュリティ方針書
* テスト・品質保証方針書

---

## 9. PRテンプレ（本文はこれだけ）

* 対象：`<採番ID>_<文書名>`
* ADF：`docs/2.システム全体方針/<採番ID>_ADF_<文書名>.md`

### Stop（質問したい不足情報）

* Stop-01：
* Stop-02：
* Stop-03：

### 論点（注力すべき課題）

* 論点-01：
* 論点-02：
* 論点-03：

---

## 10. レビュー方針

* 基本はPMO/CTCが巻き取り
* 割れた論点が出た場合は会議で決め、決定事項は「会議反映」子課題でPR化する

---

## 11. 直近の進め方

### 11.1 目的

* ADF（目次・記載内容・記述方法）を先に揃え、以降の生成物（方針書）をブレなく量産できる状態にする
* 2章（システム全体方針）の作成を開始し、完成した文書から順次PMO/CTCレビューに回す
* 0.8版では、業務要件やScalarDB PoC結果に依存しない範囲を先に固める

### 11.2 マイルストーン

**〜1/16：ADF・0.1版作成/確認、Docusaurus構築**

* 対象：ADFの目次、記載内容、記載粒度、記述方法（ISO/IEC Directives Part 2）、Docusaurusでドキュメントが閲覧可能

**1/19〜：2章（システム全体方針）作成開始**

* 進め方：完成したものから順次PR作成 → PMO/TCTレビューへ
* 入力：採番体系＋ADFのみ（不足はStop/論点で残す）

**1/30：0.8版完成**

* 定義：業務要件やScalarDBのPoC結果に依存する項目を除き、システム観点で確定できる部分を一通り揃える
* 成果：各方針書に Must / Must not / Stop / 論点 が入り、AIガードレールとして機能する状態

### 11.3 0.8版の除外範囲（未確定として残すもの）

* 業務要件・BC・業務ロール/権限・業務イベント・業務データ項目に依存する内容
* ScalarDB PoC結果（方式確定、性能前提、運用前提など）に依存する内容
* 上記は推測で補完せず、Stop（質問）または論点として明示して残す

---